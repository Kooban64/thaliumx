# ThaliumX Core Services Environment
# ==================================
# Frontend and Backend configuration with Vault integration

# ===================
# VAULT CONFIGURATION
# ===================
VAULT_ADDR=http://thaliumx-vault:8200
VAULT_TOKEN=${VAULT_TOKEN:-}

# ===================
# FRONTEND CONFIGURATION
# ===================
NODE_ENV=production
NEXT_TELEMETRY_DISABLED=1

# API Configuration
NEXT_PUBLIC_API_URL=http://thaliumx-backend:3002
NEXT_PUBLIC_WS_URL=ws://thaliumx-backend:3002

# Keycloak Configuration
NEXT_PUBLIC_KEYCLOAK_URL=http://thaliumx-keycloak:8080
NEXT_PUBLIC_KEYCLOAK_REALM=thaliumx
NEXT_PUBLIC_KEYCLOAK_CLIENT_ID=thaliumx-frontend

# ===================
# BACKEND CONFIGURATION
# ===================
PORT=3002

# Database Configuration (via Vault)
# Using Citus coordinator for multi-tenant distributed PostgreSQL
DB_HOST=thaliumx-citus-coordinator
DB_PORT=5432
DB_NAME=thaliumx
DB_USER=thaliumx
DB_PASSWORD=ThaliumX2025
DB_SSL=false
DB_POOL_MIN=2
DB_POOL_MAX=10

# Redis Configuration (via Vault)
REDIS_HOST=thaliumx-redis
REDIS_PORT=6379
REDIS_PASSWORD=ThaliumX2025
REDIS_DB=0

# JWT Configuration (via Vault)
JWT_SECRET=ThaliumX2025SecureJWTSecretKey32CharsMinimum!
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=thaliumx
JWT_AUDIENCE=thaliumx-users

# Encryption Configuration (via Vault)
ENCRYPTION_ALGORITHM=aes-256-gcm
ENCRYPTION_KEY=ThaliumX2025EncryptionKey32Chars!

# Keycloak Configuration
KEYCLOAK_URL=http://thaliumx-keycloak:8080
KEYCLOAK_REALM=master
KEYCLOAK_CLIENT_ID=admin-cli
KEYCLOAK_CLIENT_SECRET=ThaliumX2025
KEYCLOAK_ADMIN_USERNAME=admin
KEYCLOAK_ADMIN_PASSWORD=ThaliumX2025

# Keycloak Realm Configuration (configurable)
# Platform realm - for platform-level administration
KEYCLOAK_PLATFORM_REALM=thaliumx-platform
KEYCLOAK_PLATFORM_REALM_DISPLAY_NAME=ThaliumX Platform

# Default tenant realm - primary tenant for the platform
KEYCLOAK_DEFAULT_TENANT_REALM=thaliumx-default-tenant
KEYCLOAK_DEFAULT_TENANT_ID=default-tenant
KEYCLOAK_DEFAULT_TENANT_NAME=Default Tenant
KEYCLOAK_DEFAULT_TENANT_DISPLAY_NAME=ThaliumX Default Tenant
KEYCLOAK_DEFAULT_TENANT_DOMAIN=tenant.thaliumx.com

# Kafka Configuration
KAFKA_BROKERS=thaliumx-kafka:9092
KAFKA_SSL=false

# MongoDB Configuration
MONGODB_URI=mongodb://thaliumx:ThaliumX2025@thaliumx-mongodb:27017/thaliumx?authSource=admin

# Typesense Configuration
TYPESENSE_URL=http://thaliumx-typesense:8108
TYPESENSE_API_KEY=ThaliumX2025

# OPA Configuration
OPA_URL=http://thaliumx-opa:8181

# BlnkFinance Configuration
BLNK_FINANCE_URL=http://thaliumx-blnkfinance:5001
BLNK_SECRET_KEY=ThaliumX2025

# Trading Services
DINGIR_URL=http://thaliumx-dingir-restapi:8001
LIQUIBOOK_URL=http://thaliumx-liquibook:8083
QUANTLIB_URL=http://thaliumx-quantlib:8084

# OpenTelemetry Configuration
OTEL_EXPORTER_OTLP_ENDPOINT=http://thaliumx-otel-collector:4318
OTEL_SERVICE_NAME=thaliumx-backend
OTEL_TRACES_EXPORTER=otlp
OTEL_METRICS_EXPORTER=otlp
OTEL_LOGS_EXPORTER=otlp

# CORS Configuration
CORS_ORIGIN=http://localhost:3001,http://thaliumx-frontend:3000
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=100

# Feature Flags
ENABLE_VAULT=true
ENABLE_KAFKA=true
ENABLE_OTEL=true

# Logging
LOG_LEVEL=info