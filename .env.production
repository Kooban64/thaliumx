# ThaliumX Production Environment Configuration
# Generated: $(date -u +"%Y-%m-%dT%H:%M:%SZ")
# 
# IMPORTANT: This file contains references to Vault for secrets management.
# Actual secrets are stored in HashiCorp Vault and retrieved at runtime.

#=============================================================================
# ENVIRONMENT
#=============================================================================
NODE_ENV=production
APP_NAME=thaliumx
APP_VERSION=1.0.0
LOG_LEVEL=info

#=============================================================================
# VAULT CONFIGURATION (Primary Secrets Source)
#=============================================================================
VAULT_ADDR=http://vault:8200
VAULT_ROLE_ID_FILE=/run/secrets/vault-role-id
VAULT_SECRET_ID_FILE=/run/secrets/vault-secret-id
VAULT_NAMESPACE=thaliumx
VAULT_SKIP_VERIFY=false

#=============================================================================
# DATABASE CONFIGURATION (Credentials from Vault)
#=============================================================================
# PostgreSQL - Secrets at: kv/thaliumx/database/postgres
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=thaliumx
POSTGRES_SSL_MODE=require
POSTGRES_SSL_CA=/certs/ca.crt
POSTGRES_SSL_CERT=/certs/client.crt
POSTGRES_SSL_KEY=/certs/client.key
# POSTGRES_USER and POSTGRES_PASSWORD retrieved from Vault

# Redis - Secrets at: kv/thaliumx/cache/redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_TLS=true
REDIS_CA_CERT=/certs/ca.crt
# REDIS_PASSWORD retrieved from Vault

# MongoDB - Secrets at: kv/thaliumx/database/mongodb
MONGODB_HOST=mongodb
MONGODB_PORT=27017
MONGODB_DB=thaliumx
MONGODB_SSL=true
MONGODB_CA_CERT=/certs/ca.crt
# MONGODB_USER and MONGODB_PASSWORD retrieved from Vault

#=============================================================================
# AUTHENTICATION (Keycloak)
#=============================================================================
# OAuth secrets at: kv/thaliumx/oauth/keycloak
KEYCLOAK_URL=https://keycloak:8443
KEYCLOAK_REALM=thaliumx
KEYCLOAK_CLIENT_ID=thaliumx-backend
# KEYCLOAK_CLIENT_SECRET retrieved from Vault

#=============================================================================
# JWT CONFIGURATION
#=============================================================================
# JWT secrets at: kv/thaliumx/jwt/signing
JWT_ISSUER=https://auth.thaliumx.com
JWT_AUDIENCE=thaliumx-api
JWT_EXPIRY=3600
JWT_REFRESH_EXPIRY=604800
# JWT_SECRET retrieved from Vault

#=============================================================================
# ENCRYPTION
#=============================================================================
# Encryption keys at: kv/thaliumx/encryption/keys
ENCRYPTION_ALGORITHM=aes-256-gcm
# ENCRYPTION_KEY retrieved from Vault

#=============================================================================
# API GATEWAY (APISIX)
#=============================================================================
APISIX_ADMIN_URL=http://apisix:9180
# APISIX_ADMIN_KEY retrieved from Vault

#=============================================================================
# KAFKA CONFIGURATION
#=============================================================================
KAFKA_BROKERS=kafka:9092
KAFKA_SSL=true
KAFKA_CA_CERT=/certs/ca.crt
KAFKA_CLIENT_CERT=/certs/client.crt
KAFKA_CLIENT_KEY=/certs/client.key
# KAFKA_PASSWORD retrieved from Vault

#=============================================================================
# EXCHANGE CREDENTIALS (All from Vault)
#=============================================================================
# Exchange secrets at: kv/thaliumx/exchanges/{exchange_name}
# Supported exchanges: binance, bybit, kucoin, kraken, okx, valr, bitstamp, crypto_com

#=============================================================================
# BLOCKCHAIN CONFIGURATION
#=============================================================================
# Blockchain API keys at: kv/thaliumx/blockchain/{network}
# Networks: bscscan, etherscan

# RPC Endpoints
BSC_RPC_URL=https://bsc-dataseed.binance.org/
ETH_RPC_URL=https://mainnet.infura.io/v3/
POLYGON_RPC_URL=https://polygon-rpc.com/

#=============================================================================
# WALLET CONFIGURATION
#=============================================================================
# Wallet secrets at: kv/thaliumx/wallets/{network}/admin
# Networks: mainnet, testnet
# Contains: address, private_key, mnemonic

#=============================================================================
# SMTP CONFIGURATION
#=============================================================================
# SMTP secrets at: kv/thaliumx/smtp/config
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_SECURE=true
# SMTP_USER and SMTP_PASSWORD retrieved from Vault

#=============================================================================
# OBSERVABILITY
#=============================================================================
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317
OTEL_SERVICE_NAME=thaliumx-backend
OTEL_TRACES_SAMPLER=parentbased_traceidratio
OTEL_TRACES_SAMPLER_ARG=0.1

PROMETHEUS_METRICS_PORT=9090
LOKI_URL=http://loki:3100

#=============================================================================
# RATE LIMITING
#=============================================================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

#=============================================================================
# CORS CONFIGURATION
#=============================================================================
CORS_ORIGINS=https://app.thaliumx.com,https://admin.thaliumx.com
CORS_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_CREDENTIALS=true

#=============================================================================
# SECURITY HEADERS
#=============================================================================
HELMET_ENABLED=true
CSP_ENABLED=true
HSTS_MAX_AGE=31536000

#=============================================================================
# FEATURE FLAGS
#=============================================================================
FEATURE_TRADING_ENABLED=true
FEATURE_STAKING_ENABLED=true
FEATURE_PRESALE_ENABLED=true
FEATURE_VESTING_ENABLED=true
